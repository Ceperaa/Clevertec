<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                        http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">
    <includeAll path="db-changelog-1.xml"/>

    <changeSet author="Sergey" id="1">
        <sql>
            CREATE TABLE IF NOT EXISTS public.product
            (
            id SERIAL PRIMARY KEY,
            name varchar(50) NOT NULL,
            amount integer NOT NULL,
            discount_percent integer,
            price varchar(10) NOT NULL
            );

            --DROP TABLE IF EXISTS public.discount_card;

            CREATE TABLE IF NOT EXISTS public.discount_card
            (
            id SERIAL PRIMARY KEY,
            discount integer NOT NULL
            );

            --DROP TABLE IF EXISTS public."check";

            CREATE TABLE IF NOT EXISTS public."check"
            (
            id SERIAL PRIMARY KEY,
            total_price_with_discount varchar(10) NOT NULL,
            total_price varchar(10) NOT NULL,
            discount_amount integer,
            total_percent integer
            );
            --DROP TABLE IF EXISTS public.product_information;

            CREATE TABLE IF NOT EXISTS public.product_information
            (
            id SERIAL PRIMARY KEY,
            price_with_discount varchar(10) NOT NULL,
            check_id integer NOT NULL,
            product_id integer NOT NULL,
            total_price varchar(10) NOT NULL,
            total_price_with_discount varchar(10) NOT NULL,
            discount_percent integer NOT NULL,
            CONSTRAINT "check" FOREIGN KEY (check_id)
            REFERENCES public."check" (id) MATCH SIMPLE
            ON UPDATE NO ACTION
            ON DELETE NO ACTION,
            CONSTRAINT product FOREIGN KEY (product_id)
            REFERENCES public.product (id) MATCH SIMPLE
            ON UPDATE NO ACTION
            ON DELETE NO ACTION
            );

        </sql>
    </changeSet>
    <changeSet author="Sergey" id="6">
        <sql>
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('APhone', 12,3, 44.23);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('BPhone', 14,2, 74.34);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('CPhone', 16,4, 94.06);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('DPhone', 13,6, 74.59);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('EPhone', 11,0, 24.98);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('FPhone', 18,0, 44.95);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('GPhone', 16,2, 74.96);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('HPhone', 19,8, 84.87);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('IPhone', 13,6, 24.78);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('JPhone', 15,4, 44.66);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('KPhone', 14,2, 14.52);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('LPhone', 18,2, 64.49);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('MPhone', 12,0, 74.39);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('NPhone', 11,0, 34.16);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('OPhone', 19,4, 34.18);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('PPhone', 15,30,34.16);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('QPhone', 13,3, 34.76);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('RPhone', 17,2, 34.54);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('SPhone', 19,6, 34.93);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('TPhone', 20,5, 34.72);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('UPhone',  9,50,34.59);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('VPhone',  5,30,34.55);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('WPhone', 10,5, 34.76);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('XPhone', 11,8, 34.86);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('YPhone', 19,8, 34.56);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('ZPhone', 18,9, 34.96);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('APhone', 18,7, 34.36);
            INSERT INTO product (name, amount, price,discount_percent) VALUES ('APhone', 16,5, 34.46);
        </sql>
    </changeSet>
    <changeSet author="Sergey" id="7">
        <sql>
            INSERT INTO public.discount_card (discount) VALUES (50);
            INSERT INTO public.discount_card (discount) VALUES (3);
            INSERT INTO public.discount_card (discount) VALUES (3);
            INSERT INTO public.discount_card (discount) VALUES (5);
            INSERT INTO public.discount_card (discount) VALUES (5);
            INSERT INTO public.discount_card (discount) VALUES (10);
            INSERT INTO public.discount_card (discount) VALUES (15);
            INSERT INTO public.discount_card (discount) VALUES (8);
        </sql>
    </changeSet>

<!--    <changeSet  author="Sergey" id="1">-->
<!--        <createTable tableName="product">-->
<!--            <column name="id" type="BIGINT" autoIncrement="true">-->
<!--                <constraints primaryKey="true" nullable="false"/>-->
<!--            </column>-->
<!--            <column name="name" type="VARCHAR(50)">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="amount" type="INT">-->
<!--                <constraints nullable="false" />-->
<!--            </column>-->
<!--            <column name="discount_amount" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="price" type="INT)">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--        </createTable>-->
<!--    </changeSet>-->

<!--    <changeSet  author="Sergey" id="2">-->
<!--        <createTable tableName="product_information">-->
<!--            <column name="id" type="BIGINT" autoIncrement="true">-->
<!--                <constraints primaryKey="true" nullable="false"/>-->
<!--            </column>-->
<!--            <column name="price_with_discount" type="VARCHAR(50)">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="check_id" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="product_id" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="total_price_with_discount" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="discount_percent" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--        </createTable>-->
<!--    </changeSet>-->

<!--    <changeSet  author="Sergey" id="3">-->
<!--        <createTable tableName="discount_card">-->
<!--            <column name="id" type="BIGINT" autoIncrement="true">-->
<!--                <constraints primaryKey="true" nullable="false"/>-->
<!--            </column>-->
<!--            <column name="discount" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--        </createTable>-->
<!--    </changeSet>-->

<!--    <changeSet  author="Sergey" id="4">-->
<!--        <createTable tableName="check">-->
<!--            <column name="id" type="BIGINT" autoIncrement="true">-->
<!--                <constraints primaryKey="true" nullable="false"/>-->
<!--            </column>-->
<!--            <column name="total_price_with_discount" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="total_price" type="VARCHAR(50)">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="discount_amount" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--            <column name="total_percent" type="INT">-->
<!--                <constraints nullable="false"/>-->
<!--            </column>-->
<!--        </createTable>-->
<!--    </changeSet>-->

<!--    <changeSet id="4" author="Sergey">-->
<!--        <addForeignKeyConstraint baseColumnNames="check_id"-->
<!--                                 baseTableName="product_information"-->
<!--                                 constraintName="fk_check_product_information"-->
<!--                                 onDelete="CASCADE"-->
<!--                                 onUpdate="CASCADE"-->
<!--                                 referencedColumnNames="id"-->
<!--                                 referencedTableName="check"/>-->
<!--    </changeSet>-->

<!--    <changeSet id="5" author="Sergey">-->
<!--        <addForeignKeyConstraint baseColumnNames="product_id"-->
<!--                                 baseTableName="product_information"-->
<!--                                 constraintName="fk_product_product_information"-->
<!--                                 onDelete="CASCADE"-->
<!--                                 onUpdate="CASCADE"-->
<!--                                 referencedColumnNames="id"-->
<!--                                 referencedTableName="product"/>-->
<!--    </changeSet>-->


</databaseChangeLog>
